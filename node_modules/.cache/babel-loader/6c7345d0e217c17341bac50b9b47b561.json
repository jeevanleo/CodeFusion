{"ast":null,"code":"import _asyncToGenerator from\"/Users/jeevansatyam/Desktop/realtime-code-editor-main/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/jeevansatyam/Desktop/realtime-code-editor-main/node_modules/@babel/runtime/regenerator/index.js\";import React,{useEffect,useRef}from\"react\";import{language,cmtheme}from\"../../src/atoms\";import{useRecoilValue}from\"recoil\";import Codemirror from\"codemirror\";import\"codemirror/lib/codemirror.css\";import\"codemirror/theme/dracula.css\";import\"codemirror/mode/javascript/javascript\";import\"codemirror/addon/edit/closetag\";import\"codemirror/addon/edit/closebrackets\";import\"codemirror/lib/codemirror.css\";import\"codemirror/theme/3024-day.css\";import\"codemirror/theme/3024-night.css\";import\"codemirror/theme/abbott.css\";import\"codemirror/theme/abcdef.css\";import\"codemirror/theme/ambiance.css\";import\"codemirror/theme/ayu-dark.css\";import\"codemirror/theme/ayu-mirage.css\";import\"codemirror/theme/base16-dark.css\";import\"codemirror/theme/base16-light.css\";import\"codemirror/theme/bespin.css\";import\"codemirror/theme/blackboard.css\";import\"codemirror/theme/cobalt.css\";import\"codemirror/theme/colorforth.css\";import\"codemirror/theme/darcula.css\";import\"codemirror/theme/dracula.css\";import\"codemirror/theme/duotone-dark.css\";import\"codemirror/theme/duotone-light.css\";import\"codemirror/theme/eclipse.css\";import\"codemirror/theme/elegant.css\";import\"codemirror/theme/erlang-dark.css\";import\"codemirror/theme/gruvbox-dark.css\";import\"codemirror/theme/hopscotch.css\";import\"codemirror/theme/icecoder.css\";import\"codemirror/theme/idea.css\";import\"codemirror/theme/isotope.css\";import\"codemirror/theme/juejin.css\";import\"codemirror/theme/lesser-dark.css\";import\"codemirror/theme/liquibyte.css\";import\"codemirror/theme/lucario.css\";import\"codemirror/theme/material.css\";import\"codemirror/theme/material-darker.css\";import\"codemirror/theme/material-palenight.css\";import\"codemirror/theme/material-ocean.css\";import\"codemirror/theme/mbo.css\";import\"codemirror/theme/mdn-like.css\";import\"codemirror/theme/midnight.css\";import\"codemirror/theme/monokai.css\";import\"codemirror/theme/moxer.css\";import\"codemirror/theme/neat.css\";import\"codemirror/theme/neo.css\";import\"codemirror/theme/night.css\";import\"codemirror/theme/nord.css\";import\"codemirror/theme/oceanic-next.css\";import\"codemirror/theme/panda-syntax.css\";import\"codemirror/theme/paraiso-dark.css\";import\"codemirror/theme/paraiso-light.css\";import\"codemirror/theme/pastel-on-dark.css\";import\"codemirror/theme/railscasts.css\";import\"codemirror/theme/rubyblue.css\";import\"codemirror/theme/seti.css\";import\"codemirror/theme/shadowfox.css\";import\"codemirror/theme/solarized.css\";import\"codemirror/theme/the-matrix.css\";import\"codemirror/theme/tomorrow-night-bright.css\";import\"codemirror/theme/tomorrow-night-eighties.css\";import\"codemirror/theme/ttcn.css\";import\"codemirror/theme/twilight.css\";import\"codemirror/theme/vibrant-ink.css\";import\"codemirror/theme/xq-dark.css\";import\"codemirror/theme/xq-light.css\";import\"codemirror/theme/yeti.css\";import\"codemirror/theme/yonce.css\";import\"codemirror/theme/zenburn.css\";import\"codemirror/mode/clike/clike\";import\"codemirror/mode/css/css\";import\"codemirror/mode/dart/dart\";import\"codemirror/mode/django/django\";import\"codemirror/mode/dockerfile/dockerfile\";import\"codemirror/mode/go/go\";import\"codemirror/mode/htmlmixed/htmlmixed\";import\"codemirror/mode/javascript/javascript\";import\"codemirror/mode/jsx/jsx\";import\"codemirror/mode/markdown/markdown\";import\"codemirror/mode/php/php\";import\"codemirror/mode/python/python\";import\"codemirror/mode/r/r\";import\"codemirror/mode/rust/rust\";import\"codemirror/mode/ruby/ruby\";import\"codemirror/mode/sass/sass\";import\"codemirror/mode/shell/shell\";import\"codemirror/mode/sql/sql\";import\"codemirror/mode/swift/swift\";import\"codemirror/mode/xml/xml\";import\"codemirror/mode/yaml/yaml\";import\"codemirror/addon/edit/closetag\";import\"codemirror/addon/edit/closebrackets\";import\"codemirror/addon/scroll/simplescrollbars.css\";import\"codemirror/addon/search/search.js\";import\"codemirror/addon/search/searchcursor.js\";import\"codemirror/addon/search/jump-to-line.js\";import\"codemirror/addon/dialog/dialog.js\";import\"codemirror/addon/dialog/dialog.css\";import ACTIONS from\"../Actions\";import{jsx as _jsx}from\"react/jsx-runtime\";var Editor=function Editor(_ref){var socketRef=_ref.socketRef,roomId=_ref.roomId,onCodeChange=_ref.onCodeChange;var editorRef=useRef(null);useEffect(function(){function init(){return _init.apply(this,arguments);}function _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:editorRef.current=Codemirror.fromTextArea(document.getElementById(\"realtimeEditor\"),{mode:{name:\"javascript\",json:true},theme:\"dracula\",autoCloseTags:true,autoCloseBrackets:true,lineNumbers:true});editorRef.current.on(\"change\",function(instance,changes){var origin=changes.origin;var code=instance.getValue();onCodeChange(code);if(origin!==\"setValue\"){socketRef.current.emit(ACTIONS.CODE_CHANGE,{roomId:roomId,code:code});}});case 2:case\"end\":return _context.stop();}}},_callee);}));return _init.apply(this,arguments);}init();},[]);useEffect(function(){if(socketRef.current){socketRef.current.on(ACTIONS.CODE_CHANGE,function(_ref2){var code=_ref2.code;if(code!==null){editorRef.current.setValue(code);}});}return function(){socketRef.current.off(ACTIONS.CODE_CHANGE);};},[socketRef.current]);return/*#__PURE__*/_jsx(\"textarea\",{id:\"realtimeEditor\"});};export default Editor;","map":{"version":3,"sources":["/Users/jeevansatyam/Desktop/realtime-code-editor-main/src/components/Editor.js"],"names":["React","useEffect","useRef","language","cmtheme","useRecoilValue","Codemirror","ACTIONS","Editor","socketRef","roomId","onCodeChange","editorRef","init","current","fromTextArea","document","getElementById","mode","name","json","theme","autoCloseTags","autoCloseBrackets","lineNumbers","on","instance","changes","origin","code","getValue","emit","CODE_CHANGE","setValue","off"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef } from \"react\";\nimport { language, cmtheme } from \"../../src/atoms\";\nimport { useRecoilValue } from \"recoil\";\nimport Codemirror from \"codemirror\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/dracula.css\";\nimport \"codemirror/mode/javascript/javascript\";\nimport \"codemirror/addon/edit/closetag\";\nimport \"codemirror/addon/edit/closebrackets\";\nimport \"codemirror/lib/codemirror.css\";\nimport \"codemirror/theme/3024-day.css\";\nimport \"codemirror/theme/3024-night.css\";\nimport \"codemirror/theme/abbott.css\";\nimport \"codemirror/theme/abcdef.css\";\nimport \"codemirror/theme/ambiance.css\";\nimport \"codemirror/theme/ayu-dark.css\";\nimport \"codemirror/theme/ayu-mirage.css\";\nimport \"codemirror/theme/base16-dark.css\";\nimport \"codemirror/theme/base16-light.css\";\nimport \"codemirror/theme/bespin.css\";\nimport \"codemirror/theme/blackboard.css\";\nimport \"codemirror/theme/cobalt.css\";\nimport \"codemirror/theme/colorforth.css\";\nimport \"codemirror/theme/darcula.css\";\nimport \"codemirror/theme/dracula.css\";\nimport \"codemirror/theme/duotone-dark.css\";\nimport \"codemirror/theme/duotone-light.css\";\nimport \"codemirror/theme/eclipse.css\";\nimport \"codemirror/theme/elegant.css\";\nimport \"codemirror/theme/erlang-dark.css\";\nimport \"codemirror/theme/gruvbox-dark.css\";\nimport \"codemirror/theme/hopscotch.css\";\nimport \"codemirror/theme/icecoder.css\";\nimport \"codemirror/theme/idea.css\";\nimport \"codemirror/theme/isotope.css\";\nimport \"codemirror/theme/juejin.css\";\nimport \"codemirror/theme/lesser-dark.css\";\nimport \"codemirror/theme/liquibyte.css\";\nimport \"codemirror/theme/lucario.css\";\nimport \"codemirror/theme/material.css\";\nimport \"codemirror/theme/material-darker.css\";\nimport \"codemirror/theme/material-palenight.css\";\nimport \"codemirror/theme/material-ocean.css\";\nimport \"codemirror/theme/mbo.css\";\nimport \"codemirror/theme/mdn-like.css\";\nimport \"codemirror/theme/midnight.css\";\nimport \"codemirror/theme/monokai.css\";\nimport \"codemirror/theme/moxer.css\";\nimport \"codemirror/theme/neat.css\";\nimport \"codemirror/theme/neo.css\";\nimport \"codemirror/theme/night.css\";\nimport \"codemirror/theme/nord.css\";\nimport \"codemirror/theme/oceanic-next.css\";\nimport \"codemirror/theme/panda-syntax.css\";\nimport \"codemirror/theme/paraiso-dark.css\";\nimport \"codemirror/theme/paraiso-light.css\";\nimport \"codemirror/theme/pastel-on-dark.css\";\nimport \"codemirror/theme/railscasts.css\";\nimport \"codemirror/theme/rubyblue.css\";\nimport \"codemirror/theme/seti.css\";\nimport \"codemirror/theme/shadowfox.css\";\nimport \"codemirror/theme/solarized.css\";\nimport \"codemirror/theme/the-matrix.css\";\nimport \"codemirror/theme/tomorrow-night-bright.css\";\nimport \"codemirror/theme/tomorrow-night-eighties.css\";\nimport \"codemirror/theme/ttcn.css\";\nimport \"codemirror/theme/twilight.css\";\nimport \"codemirror/theme/vibrant-ink.css\";\nimport \"codemirror/theme/xq-dark.css\";\nimport \"codemirror/theme/xq-light.css\";\nimport \"codemirror/theme/yeti.css\";\nimport \"codemirror/theme/yonce.css\";\nimport \"codemirror/theme/zenburn.css\";\nimport \"codemirror/mode/clike/clike\";\nimport \"codemirror/mode/css/css\";\nimport \"codemirror/mode/dart/dart\";\nimport \"codemirror/mode/django/django\";\nimport \"codemirror/mode/dockerfile/dockerfile\";\nimport \"codemirror/mode/go/go\";\nimport \"codemirror/mode/htmlmixed/htmlmixed\";\nimport \"codemirror/mode/javascript/javascript\";\nimport \"codemirror/mode/jsx/jsx\";\nimport \"codemirror/mode/markdown/markdown\";\nimport \"codemirror/mode/php/php\";\nimport \"codemirror/mode/python/python\";\nimport \"codemirror/mode/r/r\";\nimport \"codemirror/mode/rust/rust\";\nimport \"codemirror/mode/ruby/ruby\";\nimport \"codemirror/mode/sass/sass\";\nimport \"codemirror/mode/shell/shell\";\nimport \"codemirror/mode/sql/sql\";\nimport \"codemirror/mode/swift/swift\";\nimport \"codemirror/mode/xml/xml\";\nimport \"codemirror/mode/yaml/yaml\";\nimport \"codemirror/addon/edit/closetag\";\nimport \"codemirror/addon/edit/closebrackets\";\nimport \"codemirror/addon/scroll/simplescrollbars.css\";\nimport \"codemirror/addon/search/search.js\";\nimport \"codemirror/addon/search/searchcursor.js\";\nimport \"codemirror/addon/search/jump-to-line.js\";\nimport \"codemirror/addon/dialog/dialog.js\";\nimport \"codemirror/addon/dialog/dialog.css\";\nimport ACTIONS from \"../Actions\";\n\nconst Editor = ({ socketRef, roomId, onCodeChange }) => {\n  const editorRef = useRef(null);\n  useEffect(() => {\n    async function init() {\n      editorRef.current = Codemirror.fromTextArea(\n        document.getElementById(\"realtimeEditor\"),\n        {\n          mode: { name: \"javascript\", json: true },\n          theme: \"dracula\",\n          autoCloseTags: true,\n          autoCloseBrackets: true,\n          lineNumbers: true,\n        }\n      );\n\n      editorRef.current.on(\"change\", (instance, changes) => {\n        const { origin } = changes;\n        const code = instance.getValue();\n        onCodeChange(code);\n        if (origin !== \"setValue\") {\n          socketRef.current.emit(ACTIONS.CODE_CHANGE, {\n            roomId,\n            code,\n          });\n        }\n      });\n    }\n    init();\n  }, []);\n\n  useEffect(() => {\n    if (socketRef.current) {\n      socketRef.current.on(ACTIONS.CODE_CHANGE, ({ code }) => {\n        if (code !== null) {\n          editorRef.current.setValue(code);\n        }\n      });\n    }\n\n    return () => {\n      socketRef.current.off(ACTIONS.CODE_CHANGE);\n    };\n  }, [socketRef.current]);\n\n  return <textarea id=\"realtimeEditor\"></textarea>;\n};\n\nexport default Editor;\n"]},"metadata":{},"sourceType":"module"}